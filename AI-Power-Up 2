import openai
import os
from datetime import datetime

# === STEP 1ï¼šè¨­å®š API é‡‘é‘°ï¼ˆå»ºè­°ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼‰ ===
openai.api_key = os.getenv("OPENAI_API_KEY")  # æˆ–ç›´æ¥å¯«æˆ openai.api_key = "sk-..."

# === STEP 2ï¼šå®šç¾©æç¤ºæ¸…å–®ï¼ˆå¯ä¾éœ€æ±‚ä¿®æ”¹ï¼‰ ===
prompts = [
    "ç”¨ä¸€å¥è©±è§£é‡‹ä»€éº¼æ˜¯é»‘æ´ã€‚",
    "è«‹ç”¨ä¸€å¥è©±ç¸½çµ AI ç™¼å±•æ­·å²ã€‚",
    "ç¿»è­¯é€™å¥è©±æˆè‹±æ–‡ï¼šæˆ‘æ„›é–±è®€é—œæ–¼å®‡å®™çš„æ›¸ã€‚",
    "çµ¦æˆ‘ä¸‰å€‹ AI ä¸»é¡Œ podcast çš„åç¨±ã€‚",
    "æˆ‘æœ€è¿‘å¾ˆç„¦æ…®ï¼Œè«‹ç”¨ä¸€å¥è©±çµ¦æˆ‘å¿ƒç†å»ºè­°ã€‚"
]

# === STEP 3ï¼šèˆ‡ GPT æ¨¡å‹äº’å‹•ä¸¦å„²å­˜å›æ‡‰ ===
responses = []

for i, prompt in enumerate(prompts):
    print(f"\nğŸ”¹ å•é¡Œ {i+1}: {prompt}")
    
    try:
        # èˆ‡ OpenAI ChatGPT API å°è©±
        response = openai.ChatCompletion.create(
            model="gpt-3.5-turbo",  # æˆ– "gpt-4"ï¼ˆéœ€æ¬Šé™ï¼‰
            messages=[{"role": "user", "content": prompt}]
        )

        # æ“·å–æ¨¡å‹å›æ‡‰æ–‡å­—
        reply = response['choices'][0]['message']['content'].strip()
        responses.append((prompt, reply))

        print(f"ğŸ¤– å›ç­”: {reply}")

    except Exception as e:
        print(f"âŒ ç™¼ç”ŸéŒ¯èª¤ï¼š{e}")
        responses.append((prompt, "ERROR"))

# === STEP 4ï¼šå°‡æ‰€æœ‰çµæœå¯«å…¥æª”æ¡ˆ ===
filename = f"ai_responses_{datetime.now().strftime('%Y%m%d_%H%M%S')}.txt"

with open(filename, "w", encoding="utf-8") as f:
    for q, a in responses:
        f.write(f"Q: {q}\nA: {a}\n\n")

print(f"\nâœ… æ‰€æœ‰å›æ‡‰å·²å„²å­˜è‡³ï¼š{filename}")
