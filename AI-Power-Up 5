æœ¬è…³æœ¬é€é OpenAI æ¨¡å‹è‡ªå‹•ç”Ÿæˆä¸€å¥ã€Œæ¥µçŸ­ç¯‡æ•…äº‹ã€ï¼Œé©åˆç”¨æ–¼ç¤¾ç¾¤è²¼æ–‡éˆæ„Ÿã€å¯«ä½œé–‹é ­ç·´ç¿’æˆ–å‰µæ„æ¿€ç™¼ã€‚ä½ å¯ä»¥æ¯æ¬¡éš¨æ©Ÿç”Ÿæˆé¢¨æ ¼ä¸åŒçš„æ•…äº‹ï¼ˆå¥‡å¹»ã€æ‡¸ç–‘ã€æ„›æƒ…ç­‰ï¼‰ï¼Œå¿«é€Ÿç²å¾—å¯Œæœ‰æƒ³åƒåŠ›çš„ä¸€å¥æ•…äº‹ç¨®å­ï¼Œé©åˆå‰µä½œè€…æˆ–å­¸ç”Ÿæ—¥å¸¸ä½¿ç”¨ã€‚
import openai
import os
import random

# === STEP 1: è¨­å®šä½ çš„ OpenAI API é‡‘é‘°ï¼ˆå»ºè­°è¨­ç‚ºç’°å¢ƒè®Šæ•¸ï¼‰ ===
openai.api_key = os.getenv("OPENAI_API_KEY")  # æˆ–å¯«æˆï¼šopenai.api_key = "sk-..."

# === STEP 2: å®šç¾©æ•…äº‹é¢¨æ ¼é¡å‹ï¼ˆå¯æ“´å……ï¼‰ ===
genres = ["å¥‡å¹»", "æ‡¸ç–‘", "ç§‘å¹»", "æ„›æƒ…", "æœ«æ—¥", "æº«é¦¨", "é»‘è‰²å¹½é»˜"]

# === STEP 3: éš¨æ©ŸæŒ‘ä¸€ç¨®é¢¨æ ¼ + å»ºæ§‹æç¤ºèª ===
selected_genre = random.choice(genres)
prompt = f"è«‹ç”¨ä¸€å¥è©±å¯«å‡ºä¸€å€‹é¢¨æ ¼ç‚ºã€Œ{selected_genre}ã€çš„æ¥µçŸ­ç¯‡æ•…äº‹ï¼Œè¦æœ‰åŠ‡æƒ…èµ·ä¼æˆ–åè½‰ã€‚"

# === STEP 4: ç™¼é€çµ¦ ChatGPT ä¸¦å–å¾—å›æ‡‰ ===
response = openai.ChatCompletion.create(
    model="gpt-3.5-turbo",  # ä¹Ÿå¯ç”¨ gpt-4
    messages=[{"role": "user", "content": prompt}]
)

story = response['choices'][0]['message']['content'].strip()

# === STEP 5: é¡¯ç¤ºçµæœ ===
print(f"ğŸ“ é¡å‹ï¼š{selected_genre}")
print(f"ğŸ“– æ•…äº‹ï¼š{story}")
